{
    "tasks": [
        {
            "id": "docker-cgroups-task",
            "schedule": {
                "interval": "5s"
            },
            "collect": {
                "plugin": "docker",
                "metrics": {
                    "/intel/docker/*/stats/cgroups/cpu_stats/*": {}
                },
                "config": {
                    "endpoint": "unix:///var/run/docker.sock",
                    "procfs": "/proc"
                },
                "tags": {
                    "/intel": {
                        "nodename": "<%= a.env('NODE_NAME') =>",
                        "deploymentId": "test"
                    }
                }
            },
            "process": {
                "plugin": "average",
                "config": {
                    "collect.namespaces": "default",
                    "collect.include_empty_namespace": true,
                    "collect.exclude_metrics": "*cpu_stats/cpu_shares, */cpuset_stats/*, */pids_stats/*, */cpu_usage/per_cpu/*",
                    "collect.exclude_metrics.except": "",
                    "average": "*/blkio_stats/*, */cpu_usage/*, */cpu_stats/throttling_data/*, */cgroups/memory_stats/*/failcnt, */cgroups/memory_stats/*/pgfault, */cgroups/memory_stats/*/pgmajfault, */cgroups/memory_stats/*/pgpgin, */cgroups/memory_stats/*/pgpgout, */cgroups/memory_stats/*/total_pgfault, */cgroups/memory_stats/*/total_pgmajfault, */cgroups/memory_stats/*/total_pgppin, */cgroups/memory_stats/*/total_pgpgout, */cgroups/hugetlb_stats/*/failcnt"
                },
                "analyze": {
                    "plugin": "nodeanalyzer",
                    "config": {
                        "sampleInterval": "5",
                        "configUrl": "https://s3.amazonaws.com/jpra1113-node-agent/test_derived_metrics_config.json"
                    },
                    "publish": [
                        "derivedmetrics"
                    ]
                }
            },
            "publish": [
                "snapaverage"
            ]
        }
    ],
    "publish": [
        {
            "id": "derivedmetrics",
            "plugin": "influxdb",
            "config": {
                "host": "localhost",
                "scheme": "http",
                "port": 8086,
                "user": "root",
                "password": "default",
                "database": "derivedmetrics",
                "retention": "autogen",
                "skip-verify": false,
                "isMultiFields": false
            }
        },
        {
            "id": "snapaverage",
            "plugin": "influxdb",
            "config": {
                "host": "localhost",
                "scheme": "http",
                "port": 8086,
                "user": "root",
                "password": "default",
                "database": "snapaverage",
                "retention": "autogen",
                "skip-verify": false,
                "isMultiFields": false
            }
        }
    ]
}